<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css}" rel="stylesheet">

    <title>Login IF Bank</title>
</head>
<body>
    <main>
        <table th:if="${allUsers.size() > 0}">
            <h1>Listar todos os usuários</h1>

            <thead>
            <tr>
                <th>Username</th>
                <th>CPF</th>
                <th>Número da conta</th>
                <th>Saldo</th>
                <th>Email</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="user: ${allUsers}">
                <td th:text="${user.getUser().getUsername()}"></td>
                <td th:text="${user.getUser().getCpf()}"></td>
                <td th:text="${user.getNumber()}"></td>
                <td th:text="${user.getBalance()}"></td>
                <td th:text="${user.getUser().getEmail()}"></td>
                <td><a th:href="@{/admin/delete/{id}(id=${user.getNumber()})}"><button>Excluir user</button></a></td>
            </tr>
            </tbody>
        </table>

        <button id="view-deposit-form">Depositar</button>

        <form th:action="@{/admin/deposit}" method="post" id="deposit-form" style="display: none">
            <i id="close">X</i>

            <label>Número da conta ou chave pix para depósito</label>
            <input type="text" name="login" required>

            <label>Valor do depósito</label>
            <input type="number" name="value" required>

            <button type="submit">Depositar</button>
        </form>
    </main>

    <script th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js}"></script>
    <script>
        $('#view-deposit-form').click(() => {
            $('#deposit-form').attr('style', 'display: unset');
            $('#view-deposit-form').attr('style', 'display: none');
        });

        $('#close').click(() => {
            $('#deposit-form').attr('style', 'display: none');
            $("#deposit-form").find('input').val('');
            $('#view-deposit-form').attr('style', 'display: unset');
        });
    </script>
</body>
</html>